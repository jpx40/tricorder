<!doctype html><html lang=en><head><title>tricorder - howto cli</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/tricorder/css/style.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.15.4/css/all.css integrity=sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm crossorigin=anonymous></head><body><main><nav><div class=menu><a href=/tricorder/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M575.8 255.5c0 18-15 32.1-32 32.1H511.8L512.5 447.7C512.5 450.5 512.3 453.1 512 455.8V472c0 22.1-17.9 40-40 40H456C454.9 512 453.8 511.1 452.7 511.9 451.3 511.1 449.9 512 448.5 512H392c-22.1.0-40-17.9-40-40V384c0-17.7-14.3-32-32-32H256c-17.7.0-32 14.3-32 32v88c0 22.1-17.9 40-40 40H128.1C126.6 512 125.1 511.9 123.6 511.8 122.4 511.9 121.2 512 120 512H104c-22.09.0-40-17.9-40-40V360C64 359.1 64.03 358.1 64.09 357.2V287.6H32.05C14.02 287.6.0 273.5.0 255.5c0-9 3.004-17 10.01-24L266.4 8.016c7-7.014 15-8.016 22-8.016s15 2.004 21.1 7.014L564.8 231.5c8 7 12.1 15 11 24z"/></svg></a><a href=https://github.com/linkdd/tricorder><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8.0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8.0-21.5 4.9-32.3 14.6-51.8 45.3.0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8.0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9.0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2.0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8.0-73.5 38.7-73.5 82.6.0 87.8 80.4 101.3 150.4 101.3h48.2c70.3.0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8.0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg></a><a href=/tricorder/tutorials/ class=active><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 336V48c0-26.51-21.5-48-48-48H96C42.98.0.0 42.98.0 96v320c0 53.02 42.98 96 96 96h320c17.67.0 32-14.33 32-31.1.0-11.72-6.607-21.52-16-27.1v-81.36C441.8 362.8 448 350.2 448 336zM143.1 128h192C344.8 128 352 135.2 352 144S344.8 160 336 160H143.1C135.2 160 128 152.8 128 144S135.2 128 143.1 128zm0 64h192C344.8 192 352 199.2 352 208S344.8 224 336 224H143.1C135.2 224 128 216.8 128 208S135.2 192 143.1 192zM384 448H96c-17.67.0-32-14.33-32-32s14.33-32 32-32h288v64z"/></svg></a><a href=https://docs.rs/tricorder/latest/tricorder/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M414.8 40.79 286.8 488.8C281.9 505.8 264.2 515.6 247.2 510.8 230.2 505.9 220.4 488.2 225.2 471.2l128-447.99C358.1 6.216 375.8-3.624 392.8 1.232c17 4.855 26.8 22.568 22 39.558h0zM518.6 121.4l112 112c12.5 12.5 12.5 32.7.0 45.2l-112 112c-12.5 12.5-32.7 12.5-45.2.0s-12.5-32.7.0-45.2L562.7 256 473.4 166.6c-12.5-12.5-12.5-32.7.0-45.2s32.7-12.5 45.2.0v0zm-352 45.2L77.25 256l89.35 89.4c12.5 12.5 12.5 32.7.0 45.2s-32.7 12.5-45.2.0L9.372 278.6c-12.496-12.5-12.496-32.7.0-45.2L121.4 121.4c12.5-12.5 32.7-12.5 45.2.0s12.5 32.7.0 45.2v0z"/></svg></a></div></nav><article><header>howto cli</header><div class=lcars-notice><div class=lcars-notice-icon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M272 95.93c26.5.0 47.99-21.47 47.99-47.97S298.5.0 272 0s-48 21.47-48 47.97 21.5 47.96 48 47.96zM209.7 357.3c-25.75-17.25-52.25-33.24-79.5-48.11L58.62 270.2 1.246 471.1c-4.875 16.1 4.1 34.74 22 39.62s34.63-4.998 39.5-21.99l36.63-128.1 60.63 40.37v78.86c0 17.62 14.38 31.99 32 31.99s32-14.37 32-31.99l.0022-95.93C224 373.2 218.6 363.2 209.7 357.3zM311.1 416c-13.88.0-25.95 8.863-30.33 21.86l-24.75 74.07h319.9l-101.9-206.3c-11.38-22.49-43.1-23.63-56.1-2.01l-31.89 54.21-65.26-35.64-24-121.2C288.1 161.3 263.2 127.7 227.1 109.7c-1-.4999-2.125-.625-3.125-1.125-2.25-1.125-4.752-1.1-7.252-2.625C201.5 99.85 185.2 95.98 168.7 95.98H95.1c-9.25.0-18.05 4.061-24.18 10.93l-55.95 63.92c-.75.9998-1.5 2.124-2.25 3.249-8.875 13.1-3 32.87 11.63 40.74l336.6 184.3-9.837 16.87H311.1zM105.9 204.1l-23.5-12.87 28.13-32.12h34.38L105.9 204.1zm93.6 52 34.9-41.28 13.5 67.61-48.4-26.33z"/></svg></div><div class=lcars-notice-text>Work In Progress</div></div><h1 id=tricorder>tricorder</h1><p>This is the executable. Here, you can control which hosts are affected by the subcommand.
You can select host from an inventory file by using the flag <code>--inventory</code>.</p><h2 id=flags>Flags:</h2><table><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td>-i &ndash;inventory &lt;FILE></td><td>Path to TOML inventory file or program producing JSON inventory</td></tr><tr><td>-H &ndash;host_id &lt;STR></td><td>Identifier of the host to connect to</td></tr><tr><td>-t &ndash;host_tags &lt;STR></td><td>Comma-separated list of tags identifying the hosts to connect to</td></tr></tbody></table><h1 id=info-subcommand>info (Subcommand)</h1><p>Gather information on hosts</p><h2 id=examples>Examples:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tricorder -i inventory info
</span></span></code></pre></div><h2 id=flags-1>Flags:</h2><table><thead><tr><th>Flag</th><th>Description</th></tr></thead><tbody><tr><td>-p &ndash;parallel</td><td>If set, the task will be executed concurrently</td></tr></tbody></table><h1 id=do-subcommand>do (Subcommand)</h1><p>Execute a command on multiple hosts.</p><h2 id=examples-1>Examples:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tricorder -i inventory <span style=color:#66d9ef>do</span> -- echo <span style=color:#e6db74>&#34;run on all hosts&#34;</span>
</span></span><span style=display:flex><span>$ tricorder -i inventory -H foo <span style=color:#66d9ef>do</span> -- echo <span style=color:#e6db74>&#34;run only on host &#39;foo&#39;&#34;</span>
</span></span><span style=display:flex><span>$ tricorder -i inventory -t myapp <span style=color:#66d9ef>do</span> -- echo <span style=color:#e6db74>&#34;run only on hosts tagged with &#39;myapp&#39;&#34;</span>
</span></span></code></pre></div><p>Commands can be templated with data from the host as defined in the
inventory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tricorder -i inventory <span style=color:#66d9ef>do</span> -- echo <span style=color:#e6db74>&#34;{host.id} says {host.vars.msg}&#34;</span>
</span></span></code></pre></div><h2 id=flags-2>Flags</h2><table><thead><tr><th>Flags</th><th>Description</th></tr></thead><tbody><tr><td>-p &ndash;parallel</td><td>If set, the task will be executed concurrently</td></tr></tbody></table><h1 id=upload-subcommand>upload (Subcommand)</h1><p>Upload a file to multiple remote hosts.</p><h2 id=examples-2>Examples:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tricorder -i inventory upload LOCAL_PATH REMOTE_PATH <span style=color:#f92672>[</span>FILE_MODE<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>$ tricorder -i inventory upload -T LOCAL_PATH REMOTE_PATH <span style=color:#f92672>[</span>FILE_MODE<span style=color:#f92672>]</span>
</span></span></code></pre></div><h2 id=flags-3>Flags:</h2><table><thead><tr><th>Flags</th><th>Description</th></tr></thead><tbody><tr><td>-p &ndash;parallel</td><td>If set, the task will be executed concurrently</td></tr><tr><td>-T &ndash;template</td><td>If set, the task will be executed concurrently</td></tr><tr><td>[LOCAL_PATH]</td><td>Path on local host to the file to be uploaded</td></tr><tr><td>[REMOTE_PATH]</td><td>Path on remote host to upload the file</td></tr><tr><td>[MODE] (default: 0644)</td><td>UNIX file mode to set on the uploaded file</td></tr></tbody></table><h1 id=download-subcommand>download (Subcommand)</h1><p>Download a file from multiple remote hosts.
The files will be downloaded to: <code>{pwd}/{host.id}/{local_path}</code></p><h2 id=examples-3>Examples:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tricorder -i inventory download REMOTE_PATH LOCAL_PATH
</span></span></code></pre></div><h2 id=flags-4>Flags:</h2><table><thead><tr><th>Flags</th><th>Description</th></tr></thead><tbody><tr><td>-p &ndash;parallel</td><td>If set, the task will be executed concurrently</td></tr><tr><td>[LOCAL_PATH]</td><td>Path on local host to the file to be uploaded</td></tr><tr><td>[REMOTE_PATH]</td><td>Path on remote host to upload the file</td></tr></tbody></table><h1 id=module-subcommand>module (Subcommand)</h1><p>Upload a module to the remote host and call it with data.
Data can be a specified JSON data file.
The data in the file will be overwritten by variables in <code>host.vars.module_&lt;modulename>.</code></p><p>A module is an executable, that gets uploaded to <code>~/.local/tricorder/&lt;modulename></code>. The Module reads the supplied data from stdin.</p><p>You could also create a Module, that calls external sources like APIs or a database to get its data.</p><h2 id=examples-4>Examples:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tricorder -i inventory module --data &lt;DATA_FILE_PATH&gt; --module &lt;MODULE_PATH&gt;
</span></span><span style=display:flex><span>$ tricorder -i inventory module --module &lt;MODULE_PATH&gt;
</span></span></code></pre></div><h2 id=flags-5>Flags:</h2><table><thead><tr><th>Flags</th><th>Description</th></tr></thead><tbody><tr><td>-p &ndash;parallel</td><td>If set, the task will be executed concurrently</td></tr><tr><td>-d &ndash;data [DATA_PATH]</td><td>Path to the file containing the data in JSON-format</td></tr><tr><td>-m &ndash;module [MODULE_PATH]</td><td>Path to the executable that should be run</td></tr></tbody></table><footer>Website content is distributed under the terms of the
<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC-BY-SA 4.0</a> license.</footer></article></main></body></html>